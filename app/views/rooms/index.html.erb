<%= render 'users/search_form_2nd' %>

<div class="container mt-3">
  <p><%= @rooms_count %> 件が見つかりました</p>
  <div class="row">
    <% @rooms.each_with_index do |room, index| %>
      <div class="col-md-4 mb-4">
        <div class="card h-100">
          <%= image_tag(room.room_image.url, class: 'card-img-top') %>
          <div class="card-body">
            <h5 class="card-title"><%= room.name %></h5>
            <p class="card-text"><small class="text-body-secondary"><%= room.address %></small></p>
            <p class="card-text"><%= room.introduction %></p>
            <h6 class="card-text">¥<%= room.price_per_night %>~</h6>
            <%= link_to '詳細はこちら', room_path(room), class: "btn btn-primary" %>
          </div>
        </div>
      </div>
      <!-- 3つごとに行を分けるロジック -->
      <% if (index + 1) % 3 == 0 && !@rooms.last.eql?(room) %>
        </div><div class="row">
      <% end %>
    <% end %>
  </div>
</div>
